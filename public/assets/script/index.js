const results = {
  "products": [
    {
      "_id": "58dfce146ed8e821809523fb",
      "id": 10145266244,
      "title": "Master Well Black Mach 3 Razor",
      "body_html": "Black is the color.",
      "vendor": "gointegrations_devtest",
      "product_type": "",
      "created_at": "2017-03-26T11:22:42-04:00",
      "handle": "master-well-black-mach-3-razor",
      "updated_at": "2017-03-29T10:06:41-04:00",
      "published_at": "2017-03-26T11:19:00-04:00",
      "template_suffix": null,
      "published_scope": "global",
      "tags": "razor",
      "variants": [
        {
          "id": 37453095172,
          "product_id": 10145266244,
          "title": "Default Title",
          "price": 15,
          "sku": "MW-002",
          "position": 1,
          "grams": 150,
          "inventory_policy": "deny",
          "compare_at_price": "30.00",
          "fulfillment_service": "manual",
          "inventory_management": "shopify",
          "option1": "Default Title",
          "option2": null,
          "option3": null,
          "created_at": "2017-03-26T11:22:42-04:00",
          "updated_at": "2017-03-29T10:06:41-04:00",
          "taxable": true,
          "barcode": "",
          "image_id": null,
          "inventory_quantity": 80,
          "weight": 150,
          "weight_unit": "g",
          "old_inventory_quantity": 80,
          "requires_shipping": true
        }
      ],
      "options": [
        {
          "id": 12209932036,
          "product_id": 10145266244,
          "name": "Title",
          "position": 1,
          "values": [
            "Default Title"
          ]
        }
      ],
      "images": [
        {
          "id": 24251457348,
          "product_id": 10145266244,
          "position": 1,
          "created_at": "2017-03-26T11:23:01-04:00",
          "updated_at": "2017-03-26T11:23:01-04:00",
          "src": "https://cdn.shopify.com/s/files/1/1877/9353/products/PB-36M3R.jpg?v=1490541781",
          "variant_ids": []
        }
      ],
      "image": {
        "id": 24251457348,
        "product_id": 10145266244,
        "position": 1,
        "created_at": "2017-03-26T11:23:01-04:00",
        "updated_at": "2017-03-26T11:23:01-04:00",
        "src": "https://cdn.shopify.com/s/files/1/1877/9353/products/PB-36M3R.jpg?v=1490541781",
        "variant_ids": []
      }
    },
    {
      "_id": "58dfce146ed8e821809523fc",
      "id": 10145263108,
      "title": "Master Well Cream Mach 3 Razor",
      "body_html": "It's Â really good",
      "vendor": "gointegrations_devtest",
      "product_type": "",
      "created_at": "2017-03-26T11:21:53-04:00",
      "handle": "master-well-mach-3-razor",
      "updated_at": "2017-03-26T11:26:23-04:00",
      "published_at": "2017-03-26T11:19:00-04:00",
      "template_suffix": null,
      "published_scope": "global",
      "tags": "razor",
      "variants": [
        {
          "id": 37453084740,
          "product_id": 10145263108,
          "title": "Default Title",
          "price": 7.5,
          "sku": "MW-001",
          "position": 1,
          "grams": 200,
          "inventory_policy": "deny",
          "compare_at_price": null,
          "fulfillment_service": "manual",
          "inventory_management": "shopify",
          "option1": "Default Title",
          "option2": null,
          "option3": null,
          "created_at": "2017-03-26T11:21:53-04:00",
          "updated_at": "2017-03-26T11:21:53-04:00",
          "taxable": true,
          "barcode": "",
          "image_id": null,
          "inventory_quantity": 100,
          "weight": 200,
          "weight_unit": "g",
          "old_inventory_quantity": 100,
          "requires_shipping": true
        }
      ],
      "options": [
        {
          "id": 12209928388,
          "product_id": 10145263108,
          "name": "Title",
          "position": 1,
          "values": [
            "Default Title"
          ]
        }
      ],
      "images": [
        {
          "id": 24251442116,
          "product_id": 10145263108,
          "position": 1,
          "created_at": "2017-03-26T11:21:54-04:00",
          "updated_at": "2017-03-26T11:21:54-04:00",
          "src": "https://cdn.shopify.com/s/files/1/1877/9353/products/PB-34M3R.jpg?v=1490541714",
          "variant_ids": []
        }
      ],
      "image": {
        "id": 24251442116,
        "product_id": 10145263108,
        "position": 1,
        "created_at": "2017-03-26T11:21:54-04:00",
        "updated_at": "2017-03-26T11:21:54-04:00",
        "src": "https://cdn.shopify.com/s/files/1/1877/9353/products/PB-34M3R.jpg?v=1490541714",
        "variant_ids": []
      }
    },
    {
      "_id": "58dfce146ed8e821809523fd",
      "id": 10145269828,
      "title": "Master Well Silver Mach 3 Razor",
      "body_html": "We also call this faux horn.",
      "vendor": "gointegrations_devtest",
      "product_type": "",
      "created_at": "2017-03-26T11:23:47-04:00",
      "handle": "master-well-brown-mach-3-razor",
      "updated_at": "2017-03-26T11:25:51-04:00",
      "published_at": "2017-03-26T11:19:00-04:00",
      "template_suffix": null,
      "published_scope": "global",
      "tags": "razor",
      "variants": [
        {
          "id": 37453112196,
          "product_id": 10145269828,
          "title": "Default Title",
          "price": 22.5,
          "sku": "MW-003",
          "position": 1,
          "grams": 150,
          "inventory_policy": "deny",
          "compare_at_price": "50.00",
          "fulfillment_service": "manual",
          "inventory_management": "shopify",
          "option1": "Default Title",
          "option2": null,
          "option3": null,
          "created_at": "2017-03-26T11:23:47-04:00",
          "updated_at": "2017-03-26T11:25:24-04:00",
          "taxable": true,
          "barcode": "",
          "image_id": null,
          "inventory_quantity": 5,
          "weight": 150,
          "weight_unit": "g",
          "old_inventory_quantity": 5,
          "requires_shipping": true
        }
      ],
      "options": [
        {
          "id": 12209936196,
          "product_id": 10145269828,
          "name": "Title",
          "position": 1,
          "values": [
            "Default Title"
          ]
        }
      ],
      "images": [
        {
          "id": 24251482500,
          "product_id": 10145269828,
          "position": 1,
          "created_at": "2017-03-26T11:25:00-04:00",
          "updated_at": "2017-03-26T11:25:00-04:00",
          "src": "https://cdn.shopify.com/s/files/1/1877/9353/products/PB-51M3R.jpg?v=1490541900",
          "variant_ids": []
        }
      ],
      "image": {
        "id": 24251482500,
        "product_id": 10145269828,
        "position": 1,
        "created_at": "2017-03-26T11:25:00-04:00",
        "updated_at": "2017-03-26T11:25:00-04:00",
        "src": "https://cdn.shopify.com/s/files/1/1877/9353/products/PB-51M3R.jpg?v=1490541900",
        "variant_ids": []
      }
    }
  ]
}
/****************************************** Main ******************************************/
const API_KEY = "edd7fd7dac31cb81df28f91455649911";
const PASSWORD = "330c304080eb8a70845b94ad0269bc50";
const PATH = "@gointegrations-devtest.myshopify.com";
const myURL = "https://" + API_KEY + ":" + PASSWORD + PATH;

$(document).ready(function(){
      create_products_section(results.products)
});

/* list of products */
function create_products_section(data) {
    
    var $section = $("<section />",{class:"container-fluid"});
    var $title = $("<h2/>",{text: "Products", align:"center"});
    var $row = $("<div />", { class: "row" });
    

    var products = data.map(function (product, index) {
        var $container = $("<div/>",{class:"col-sm-4"});
        var $img = $("<img />", {   src: product.image.src, 
                                    alt:"Image Not Available", 
                                    width:"100%",
                                    height:"300px"
                                });

        var $product_title = $("<div/>", { text: product.title });
        var price_text = "$" + product.variants[0].price;
        var $price_container = $("<div/>",{text: price_text});
        var parameter = product.title + "','" + product.variants[0].price;

        var $buy_button = $("<button />",{
                                            class: "btn btn-primary btn-block", 
                                            text:"Buy",
                                            onClick: "create_order('" + parameter +"')"
                                        })
        $container.append([$img, $product_title, $price_container, $buy_button]);
        return $container;
    });
    $section.append([$title, $row])
    $section.append(products)
    $("body").append($section)
}

function create_order(title, price)
{
    console.log(title)
    console.log(price)

    var order = { "draft_order": {
                        "line_items": [
                            {
                                "title": title,
                                "price": price,
                                "quantity": 1
                            }
                        ]
                    }
                }

    console.log(order)
    $.ajax({
        url: myURL + "/admin/draft_orders.json",
        datatype:"json",
        type:"POST",
        data: order,
        crossDomain:true
    }).done(function(result) {
        console.log(results)
    });
}
